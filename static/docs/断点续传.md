每批任务，用时间戳做 id
未完成列表最多保存 20 个
通过网址判断当前页面是否有存在任务
需要控制数据库的大小

# downloadTask

完整的下载任务数据

```
{
id:时间戳,
url:'xxxxx',
data:{}[]
}
```

- id 不重复，作为主键。
- url   网址，不包含 hash 部分。一个网址（页面）里只会保存最新一次的抓取结果。
- data  这批下载里所有任务的数据

## 处理时机

抓取完毕时，保存完整任务数据到这个表

下载完毕后，删除这个任务的数据

页面加载时，读取该网址下有没有任务，如果有，则加载这个任务的数据，恢复进度。并且将下载面板显示的选项卡设置为“下载”部分。

## 需要注意的地方

目前小说抓取后只保存了 blob url，如果关闭页面再打开，blob url 是无法使用的。是否要考虑把小说的 content 保存到数据里呢？

下载小说时 try catch ，如果这个 blob url 不可用，就从 content 里重新生成一个 url？

# downloadedItem

下载过程中，每下载完一个作品，把 id 保存到表 downloadedItem

```
{
  id:时间戳,
  ids:resultId[]
}
```

- id 时间戳，使用 downloadTask 的时间戳
- ids 数组，存储所有已经下载完成的文件的 id

下载完毕后，删除这个下载任务的所有数据。

